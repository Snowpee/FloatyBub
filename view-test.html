<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Safe Area æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        /* é¡¶éƒ¨å®‰å…¨åŒºæµ‹è¯• */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            padding-top: env(safe-area-inset-top, 0px);
            padding-left: env(safe-area-inset-left, 0px);
            padding-right: env(safe-area-inset-right, 0px);
            z-index: 100;
        }
        
        .top-content {
            padding: 16px;
            text-align: center;
        }
        
        /* åº•éƒ¨å®‰å…¨åŒºæµ‹è¯• */
        .bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            padding-bottom: env(safe-area-inset-bottom, 0px);
            padding-left: env(safe-area-inset-left, 0px);
            padding-right: env(safe-area-inset-right, 0px);
            z-index: 100;
        }
        
        .bottom-content {
            padding: 16px;
            text-align: center;
        }
        
        /* å¯è§†åŒ–å®‰å…¨åŒº */
        .safe-area-visualizer {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 200;
        }
        
        .safe-top {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: env(safe-area-inset-top, 0px);
            background: rgba(255, 0, 0, 0.3);
            border-bottom: 2px solid red;
        }
        
        .safe-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: env(safe-area-inset-bottom, 0px);
            background: rgba(0, 255, 0, 0.3);
            border-top: 2px solid lime;
        }
        
        /* å†…å®¹åŒºåŸŸ */
        .content {
            padding-top: calc(60px + env(safe-area-inset-top, 0px));
            padding-bottom: calc(60px + env(safe-area-inset-bottom, 0px));
            padding-left: env(safe-area-inset-left, 16px);
            padding-right: env(safe-area-inset-right, 16px);
            min-height: 100vh;
        }
        
        .info-box {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .value {
            font-family: 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 12px;
            border-radius: 6px;
            display: inline-block;
            margin: 4px 0;
            font-size: 14px;
        }
        
        h1 {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        h2 {
            font-size: 18px;
            margin: 16px 0 8px;
            opacity: 0.9;
        }
        
        p {
            line-height: 1.6;
            opacity: 0.8;
        }
        
        .warning {
            background: rgba(255, 165, 0, 0.2);
            border-left: 4px solid orange;
            padding: 12px;
            margin: 12px 0;
            border-radius: 4px;
        }
        
        .success {
            background: rgba(0, 255, 0, 0.2);
            border-left: 4px solid lime;
            padding: 12px;
            margin: 12px 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨æ  -->
    <div class="top-bar">
        <div class="top-content">
            <strong>é¡¶éƒ¨å®‰å…¨åŒºæµ‹è¯•</strong>
        </div>
    </div>
    
    <!-- åº•éƒ¨æ  -->
    <div class="bottom-bar">
        <div class="bottom-content">
            <strong>åº•éƒ¨å®‰å…¨åŒºæµ‹è¯•</strong>
        </div>
    </div>
    
    <!-- å®‰å…¨åŒºå¯è§†åŒ– -->
    <div class="safe-area-visualizer">
        <div class="safe-top"></div>
        <div class="safe-bottom"></div>
    </div>
    
    <!-- ä¸»å†…å®¹ -->
    <div class="content">
        <div class="info-box">
            <h1>ğŸ” Safe Area æ£€æµ‹</h1>
            <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯• iOS WebView ä¸­çš„ safe-area-inset æ˜¯å¦ç”Ÿæ•ˆ</p>
        </div>
        
        <div class="info-box">
            <h2>ğŸ“Š å½“å‰å€¼</h2>
            <div>
                <strong>Top:</strong> <span class="value" id="top-value">è®¡ç®—ä¸­...</span><br>
                <strong>Bottom:</strong> <span class="value" id="bottom-value">è®¡ç®—ä¸­...</span><br>
                <strong>Left:</strong> <span class="value" id="left-value">è®¡ç®—ä¸­...</span><br>
                <strong>Right:</strong> <span class="value" id="right-value">è®¡ç®—ä¸­...</span>
            </div>
        </div>
        
        <div class="info-box">
            <h2>âœ… é¢„æœŸè¡Œä¸º</h2>
            <div id="status"></div>
        </div>
        
        <div class="info-box">
            <h2>ğŸ“± è®¾å¤‡ä¿¡æ¯</h2>
            <p><strong>User Agent:</strong></p>
            <div class="value" style="display: block; word-break: break-all; font-size: 11px;" id="ua"></div>
            <p style="margin-top: 12px;"><strong>è§†å£å°ºå¯¸:</strong> <span class="value" id="viewport"></span></p>
            <p><strong>å±å¹•å°ºå¯¸:</strong> <span class="value" id="screen"></span></p>
        </div>
        
        <div class="info-box">
            <h2>ğŸ¨ è§†è§‰æç¤º</h2>
            <p>â€¢ çº¢è‰²åŠé€æ˜åŒºåŸŸ = é¡¶éƒ¨å®‰å…¨åŒº</p>
            <p>â€¢ ç»¿è‰²åŠé€æ˜åŒºåŸŸ = åº•éƒ¨å®‰å…¨åŒº</p>
            <p>â€¢ å¦‚æœçœ‹ä¸åˆ°å½©è‰²åŒºåŸŸ,è¯´æ˜ env() è¿”å›äº† 0</p>
        </div>
    </div>
    
    <script>
        function updateValues() {
            const root = document.documentElement;
            const style = getComputedStyle(root);
            
            // è·å–å®‰å…¨åŒºå€¼
            const top = style.getPropertyValue('padding-top') || '0px';
            const bottom = style.getPropertyValue('padding-bottom') || '0px';
            const left = style.getPropertyValue('padding-left') || '0px';
            const right = style.getPropertyValue('padding-right') || '0px';
            
            // å°è¯•ç›´æ¥ä» CSS å˜é‡è¯»å–
            const topBar = document.querySelector('.top-bar');
            const bottomBar = document.querySelector('.bottom-bar');
            const topComputed = getComputedStyle(topBar).paddingTop;
            const bottomComputed = getComputedStyle(bottomBar).paddingBottom;
            
            document.getElementById('top-value').textContent = topComputed;
            document.getElementById('bottom-value').textContent = bottomComputed;
            document.getElementById('left-value').textContent = getComputedStyle(topBar).paddingLeft;
            document.getElementById('right-value').textContent = getComputedStyle(topBar).paddingRight;
            
            // çŠ¶æ€åˆ¤æ–­
            const statusDiv = document.getElementById('status');
            const topPx = parseFloat(topComputed);
            const bottomPx = parseFloat(bottomComputed);
            
            if (topPx > 0 || bottomPx > 0) {
                statusDiv.innerHTML = `
                    <div class="success">
                        <strong>âœ… æˆåŠŸ!</strong> env() æ­£å¸¸å·¥ä½œ<br>
                        æ£€æµ‹åˆ°å®‰å…¨åŒº: é¡¶éƒ¨ ${topPx}px, åº•éƒ¨ ${bottomPx}px
                    </div>
                `;
            } else {
                statusDiv.innerHTML = `
                    <div class="warning">
                        <strong>âš ï¸ è­¦å‘Š!</strong> env() è¿”å› 0<br>
                        â€¢ å¯èƒ½åŸå› : contentInsetAdjustmentBehavior è®¾ç½®é”™è¯¯<br>
                        â€¢ è¯·æ£€æŸ¥ Swift ä»£ç ä¸­çš„ scrollView é…ç½®<br>
                        â€¢ åœ¨æœ‰åˆ˜æµ·/Home Indicator çš„è®¾å¤‡ä¸Šåº”è¯¥æœ‰å€¼
                    </div>
                `;
            }
            
            // è®¾å¤‡ä¿¡æ¯
            document.getElementById('ua').textContent = navigator.userAgent;
            document.getElementById('viewport').textContent = 
                `${window.innerWidth} Ã— ${window.innerHeight}`;
            document.getElementById('screen').textContent = 
                `${screen.width} Ã— ${screen.height}`;
        }
        
        // åˆå§‹åŠ è½½å’Œçª—å£è°ƒæ•´æ—¶æ›´æ–°
        updateValues();
        window.addEventListener('resize', updateValues);
        window.addEventListener('orientationchange', () => {
            setTimeout(updateValues, 100);
        });
        
        // å®šæœŸæ›´æ–°ä»¥æ•è·å»¶è¿ŸåŠ è½½
        setTimeout(updateValues, 500);
        setTimeout(updateValues, 1000);
    </script>
</body>
</html>